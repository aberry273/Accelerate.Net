@using System.Collections.Generic
@using System.Linq
@using Accelerate.Features.Content.Models.Views
@using Accelerate.Foundations.Common.Helpers
@using Microsoft.AspNetCore.Http 
@model ThreadPage

<div>
    <div x-data="listAccordionCard({ items: @JsonSerializerHelper.SerializeObject(Model.Parents) })"></div>
    
    <!-- Original Post -->
    <div class="blockquote dense">
        <i class="material-icons">arrow_forward</i>
        <strong>@Model.Item.ThreadId</strong>
        <!-- Original Post -->
        <div x-data="cardPost({
            item:  @JsonSerializerHelper.SerializeObject(Model.Item),
            userId: '@Model.UserId',
          })"></div>
    </div>

    <!-- Response Form -->
    <article>
        <div x-data="appFormResponse(@JsonSerializerHelper.SerializeObject(Model.FormCreateReply))"></div>
    </article>

     <!-- Filters -->
    <div x-data="appNavFilters({
        filters: @JsonSerializerHelper.SerializeObject(Model.Filters),
        event: '@Model.FilterEvent'
    })"></div>

    <!-- Replies -->
    <div x-data="listCards( {
        actionUrl: 'https://localhost:7220/api/contentpostactivity',
        searchUrl: 'https://localhost:7220/api/contentsearch/posts',
        filterEvent: '@Model.FilterEvent',
        actionEvent: 'action:post',
        itemEvent: $store.wssContentPosts.getMessageEvent(),
        targetThread: '@Model.Item.ThreadId',
        parentId: '@Model.Item.Id',
        userId: '@Model.UserId',
        items: @JsonSerializerHelper.SerializeObject(Model.Replies)
    })">
    </div>

</div>

<!-- Modals -->
<!-- Edit post -->
<div x-data="modalForm(@JsonSerializerHelper.SerializeObject(Model.ModalEditReply))"></div>

<!-- Delete post -->
<div x-data="modalForm(@JsonSerializerHelper.SerializeObject(Model.ModalDeleteReply))"></div>

<!-- Share post -->
<div x-data="modal({target: 'modal-share-post', title: 'Share post', text: 'test 123'  })"></div>
