@using System.Collections.Generic
@using System.Linq
@using Accelerate.Features.Content.Models.Views
@using Accelerate.Foundations.Common.Helpers
@using Microsoft.AspNetCore.Http 
@model ThreadPage

<div>
    <nav>
        <ul>
            <li>
                <a href="@Model.PreviousUrl">
                    <i aria-label="Agree" class="icon material-icons icon-click" rel="prev">chevron_left</i>
                </a>
            </li>
            <li>
                <strong>@Model.Item.ThreadId</strong>
            </li>
        </ul>
    </nav>
    <!-- Original post -->
    <div x-data="_contentPostsManager({
        sourceUrl: 'https://localhost:7220/api/contentpost',
        reviewUrl: 'https://localhost:7220/api/contentpostreview',
        fetchPostsUrl: 'https://localhost:7220/api/contentsearch/posts',
        fetchReviewsUrl: 'https://localhost:7220/api/contentsearch/reviews',
        threadUrl: 'https://localhost:7220/content/thread',
        event: 'post:created',
        userId: '@Model.UserId',
        targetThread: '@Model.Item.ThreadId',
        items: @JsonSerializerHelper.SerializeObject(Model.Replies),
        channel: 'all',
        })">

        <div x-data="appCardPost({
            item: @JsonSerializerHelper.SerializeObject(Model.Item),
            threadUrl: 'https://localhost:7220/content/thread',
            expandable: false,
        })"></div>
        <!--Feed-->
        <div x-data="appNavFilters({
            filters: @JsonSerializerHelper.SerializeObject(Model.Filters)
        })"></div>
       
        <!-- Response Form -->
        <article>
            <div x-data="appFormResponse(@JsonSerializerHelper.SerializeObject(Model.FormCreateReply))"></div>
        </article>

        <!--Responses-->
        <main >
            <div x-data="appListPost"></div>
        </main> 
    </div>
</div>

<!-- Modals -->
<!-- Edit post -->
<div x-data="modalForm(@JsonSerializerHelper.SerializeObject(Model.ModalEditReply))"></div>

<!-- Delete post -->
<div x-data="modalForm(@JsonSerializerHelper.SerializeObject(Model.ModalDeleteReply))"></div>

<!-- Share post -->
<div x-data="modal({target: 'modal-share-post', title: 'Share post', text: 'test 123'  })"></div>
